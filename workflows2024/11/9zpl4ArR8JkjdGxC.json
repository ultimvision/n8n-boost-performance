{
  "active": true,
  "connections": {
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Sync Users",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sync Subscriptions to Supabase": {
      "main": [
        [
          {
            "node": "Aggregate1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sync Users": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Sync Subscriptions to Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate1": {
      "main": [
        [
          {
            "node": "Update expired subscriptions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Sync Users",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2024-11-28T15:40:32.232Z",
  "id": "9zpl4ArR8JkjdGxC",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Circle Healing Sync",
  "nodes": [
    {
      "parameters": {},
      "id": "1ef1da37-5687-4b2b-aab2-5827a9b4ace7",
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        800,
        900
      ]
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "neZWeftTzWotgaEu",
          "mode": "list",
          "cachedResultName": "Sync Circle Supabase Users"
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "id": "12899144-bfe8-4fa0-a7c0-252c8ea6e054",
      "name": "Sync Users",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.1,
      "position": [
        1140,
        900
      ],
      "executeOnce": true,
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "L6KRe5JdA4S2OhtY",
          "mode": "list",
          "cachedResultName": "Sync Circle Subscriptions"
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "id": "1e5976e3-a606-49c4-8cdc-5e3a777e066e",
      "name": "Sync Subscriptions to Supabase",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.1,
      "position": [
        1620,
        900
      ],
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "update public.subscriptions set active = false where active = true and expires_at <= NOW()",
        "options": {}
      },
      "id": "3bb7593a-ee8e-4126-abe8-4a558e4fae69",
      "name": "Update expired subscriptions",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "position": [
        2140,
        900
      ],
      "alwaysOutputData": false,
      "executeOnce": true,
      "credentials": {
        "postgres": {
          "id": "pHTFnAMLpsVnMU56",
          "name": "Postgres Supabase"
        }
      }
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {}
          ]
        },
        "options": {}
      },
      "id": "d928f884-dda2-429e-8708-f4859169ed92",
      "name": "Aggregate",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1380,
        900
      ]
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {}
          ]
        },
        "options": {}
      },
      "id": "06c26f0c-95e8-4951-aac5-498f3ab3afde",
      "name": "Aggregate1",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1880,
        900
      ]
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtMinute": 1
            }
          ]
        }
      },
      "id": "29bb05c0-6222-4bd0-a91d-ae2c37a7424d",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        800,
        680
      ]
    }
  ],
  "repo_name": "n8n-boost-performance",
  "repo_owner": "ultimvision",
  "repo_path": "workflows",
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "S0qWUDOmweuNpnn1"
  },
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": []
    }
  },
  "tags": [
    {
      "createdAt": "2024-10-16T13:31:28.832Z",
      "updatedAt": "2024-10-16T13:31:28.832Z",
      "id": "zCOWWz4gcTjWLF69",
      "name": "Circle"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2024-11-28T16:35:55.000Z",
  "versionId": "3383f600-0789-4194-a6df-e94fd7ec6462"
}